<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>components</title>

<style>     
    table tr td{
        border:1px solid gray;
    }
    table{
        border-collapse:collapse;
        width:300px;
    }
    tr.firstLine{
        background-color: lightGray;
    } 
</style>
</head>
<body>
    <script src="http://how2j.cn/study/fetch.min.js"></script>
    <script src="http://how2j.cn/study/axios.min.js"></script>
    <script src="http://how2j.cn/study/vue.min.js"></script>
    <div id="fetch">  </div>
    <div id="axios">  </div> 

    <div id="div1">    
        <table align="center" >
            <tr class="firstLine">
                <td>name</td>
                <td>hp</td>
            </tr>                
            <tr v-for="hero in heros">
                <td>{{hero.name}}</td>
                <td>{{hero.hp}}</td>
            </tr>                
        </table>        
    </div>

    <script>
        var url = "json.txt"
        fetch(url).then(function(response) {
            response.json().then(function (jsonObject) {
                var jsonString = JSON.stringify(jsonObject)
                document.getElementById("fetch").innerHTML = "通过fetch获取到的json数据："+ jsonString;
            })
        }).catch(function(err){
            console.log("Fetch错误:"+err);
        })   


        axios.get(url).then(function(response) {
            var jsonObject = response.data;
            var jsonString = JSON.stringify(jsonObject)
            document.getElementById("axios").innerHTML = "通过 axios 获取到的json数据："+ jsonString;
        })
        var url2 = "jsons.txt"

        new Vue({
            el:'#div1',
            data:{
                heros:[]
            },
            mounted:function(){ //mounted　表示这个 Vue 对象加载成功了
                self=this
                // fetch代码
                // fetch(url2).then(function(response) {
                //     response.json().then(function (jsonObject) {
                //         self.heros = jsonObject
                //     })
                // }).catch(function(err){
                //     console.log("Fetch错误:"+err);
                // })

                // axios代码    
                axios.get(url2).then(function(response) {
                self.heros= response.data; //此时还是字符串
                self.heros = eval("("+self.heros+")");  //字符串转换为数组对象
        }) 
            }
        })
    </script>
</body>
</html>
